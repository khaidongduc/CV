<% layout('layouts/boilerplate') %>

<link rel="stylesheet" href="/stylesheets/project.css">

<h1 class="header">Programming</h1>

<%- include('../partials/overview', {overview_post_url: "/projects/overview"}) %>
<hr>
<div class="projects-container row">
    <% if(projects.length){ %>
    <% projects.forEach(project => { %>
    <div class="mb-3 col-12">
        <div class="project card">
            <div class="card-body">
                <h3 class="card-title"><%= project.title %></h3>
                <% if(project.htmlDescription){ %>
                <%- project.htmlDescription %>
                <% } else { %>
                <p class="card-text"><%- project.description.replace(/[\r\n]/g, "<br>"); %></p>
                <% } %>
                <a class="card-link btn btn-success" href="<%= project.repository %>" target="_blank"> Repository </a>
                <% if(project.url){ %>
                <a class="card-link btn btn-secondary" href="<%= project.url %>" target="_blank"> Website </a>
                <% } %>
                <% if(currentUser){ %>
                <a class="card-link btn btn-danger float-right" href="/projects/<%= project._id %>/edit"> Edit Project
                    <% } %>
                </a>
            </div>
        </div>
    </div>
    <% }) %>
    <% if(currentUser){ %>
    <div class="mb-3 col-12 card border-0">
        <a class="card-link btn btn-primary" href="/projects/new"> New Project </a>
    </div>
    <% } %>
</div>

<% } %>
</div>

<script>
    $("#projects-nav").addClass('current-nav');
</script>